{"version":3,"sources":["components/MainPage/arrow_L.png","app/app.module.scss","components/MainPage/arrow_R.png","app/images/settings.svg","app/images/download.svg","app/images/upload.svg","app/images/audio.svg","app/images/video.svg","app/images/delete_icon.svg","app/images/mixedContent.svg","app/images/modal_close.svg","app/images/plus.svg","app/images/arrow.svg","components/MainPage/index.module.scss","components/AuthContext/index.ts","components/MainPage/MainPage.tsx","components/appMain/appMain.tsx","database/databaseConfig.js","database/tables.ts","database/dexieProvider.ts","database/index.ts","communicatorMethods/index.ts","models/Auth.ts","app/app.tsx","serviceWorker.ts","webpack:///./src/index.tsx?d986"],"names":["module","exports","AuthContext","React","createContext","isAdmin","MainPage","settings","auth","moment","locale","useState","storedArrow","localStorage","getItem","arrowL","currentArrow","setCurrentArrow","className","styles","testWrapper","arrow","onClick","newArrow","arrowR","setItem","src","alt","UpperText","naimenovanie1","naimenovanie2","naimenovanie3","naimenovanie4","naimenovanie5","naimenovanie6","naimenovanie7","LowerText","naimen1","naimen2","naimen3","naimen4","naimen5","naimen6","naimen7","Price15","price15_1","price15_2","price15_3","price15_4","price15_5","price15_6","price15_7","PriceCombo","priceCombo_1","priceCombo_2","priceCombo_3","priceCombo_4","priceCombo_5","priceCombo_6","priceCombo_7","Price30","price30_1","price30_2","price30_3","price30_4","price30_5","price30_6","price30_7","logger","Logger","AppMain","widgetOptionsTemp","clientProvider","database","widgetOptions","useEffect","setListeners","listenerType","listenerMethod","setDeviceId","clearListeners","window","getDeviceId","authContext","useMemo","obj","deviceId","log","style","height","id","Provider","value","Object","keys","length","DATABASE_CONFIG","TABLES","DexieProvider","databaseName","declare","version","numberVersion","Number","stores","open","this","Dexie","Database","_database","someGetMethod","name","method","callback","timeout","setTimeoutUser","listener","Auth","token","host","_token","_host","_deviceId","setDictionary","l10n","App","props","settingsIconRef","_frontendMessenger","_isNeedDownloadMedia","setWidgetOptionsTemp","options","setState","clearWidgetOptionsTemp","_setAuth","data","JSON","stringify","state","_initLocale","onLocaleChanged","widgetOptionsEditor","localisation","messageListener","message","indexOf","replace","bufferData","parse","onMediaLoaded","includes","parsed","onMessageForApp","_updateWidgetData","WidgetOptionsEditor","inEditMode","onWidgetOptionsUpdated","updatedData","isExist","forceUpdate","setLocale","type","setDatabase","requireDatabase","then","setCommunicator","requireCommunicator","clientCommunicator","ClientCommunicator","methods","provider","connect","isServicesReady","_isCommunicatorInitialized","warn","_isDatabaseInitialized","handleAuthenticationScreenOpen","prevState","isAuthenticationScreenOpen","handleAuthenticationScreenClose","onAuth","getAppStyle","styleName","tempSettings","isEmpty","undefined","Messenger","removeListener","appMainProps","process","REACT_APP_PIN_CODE","getQueryStringValue","app","fontSize","AppContext","edit","path","isNeedDownloadMedia","ref","MainComponent","localeChanged","navButtonsText","applyButton","translate","resetButton","iconsList","download_icon","upload_icon","audio_icon","video_icon","delete_icon","mixed_content_icon","modal_close","plus_icon","arrow_icon","fields","label","settingsIcon","openEditorIcon","e","editStart","width","Component","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.cd0b94d1.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA0QAAAAmCAYAAAGTymt0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA0LTIxVDEwOjUyOjUwKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wNC0yMVQxMTozODo1MSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wNC0yMVQxMTozODo1MSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmN2E3ZjE0Zi0wOTYwLWY1NDAtOWQzMi02NjYyNTg3MWFjYzEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpkY2I5ZTY3NC1mODJkLTk0NDMtYjA3NC1mYjFkZWM2NmJjNWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmYzdkYTNiMi01MGMwLWM0NDMtYjA3ZC1jYTliYjMyZGM4YmQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmZjN2RhM2IyLTUwYzAtYzQ0My1iMDdkLWNhOWJiMzJkYzhiZCIgc3RFdnQ6d2hlbj0iMjAyMi0wNC0yMVQxMDo1Mjo1MCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphYzQ5MmFiZi1jNWE2LTc2NGItYmJiYy1mMTk5MGJhNjkyNjAiIHN0RXZ0OndoZW49IjIwMjItMDQtMjFUMTE6Mzg6NTErMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjdhN2YxNGYtMDk2MC1mNTQwLTlkMzItNjY2MjU4NzFhY2MxIiBzdEV2dDp3aGVuPSIyMDIyLTA0LTIxVDExOjM4OjUxKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bSvwdAAAArJJREFUeJzt3U9um0AUB+CHySXabNpNchBuFM7BjcJBkk27qU8R5G6KZdf4v5nB5vtWjkKiJ6HRm58ZZorYsFqtgulZ9B/KpnKHJqqIcIOmbnH8EnIr+g9lU62+3t6LQxeTx/qmmDRM0yJCP5qyws2ZNjO6idODJm5n5mZGB+fZikM5C4F7ZS4HV9qatvWDyXQOTjc4WARYON3QFwsfX2/vrzmKgXv0tPlD2VS/IuJHnlLgPq0HUdlUfyLie8Za4C71384ZQHChwgCC6yzCAIKreNgKVxpc9uNhK5xu/b5XV7cGDlxg66VJAwnOd3TQlE31EREvpngAjOFp3y88PgIghZ1GpAEBkNLmk1YNCIDkirKplhHxLXchAMyTLecAyGpwA+GhC62aA2AMOwdHdXVbeBcCgFT2nmCoIQGQwkmNxr72AIzl6JnuFjEAMKaDjUgTAmBsexuRJgRACoONSBMCIJWdRqQJAZDS1qo5TQiA1GzxA0BWDgsHIKtCEwIgp0VELHMXAcB89V/NORQPgCyc0ApAVv8v3x5sRs4iAmAsWy+0dnX7HJ4ZAZDQ0MF4mhEAyQzuNacZAZDKoRNanyPiM2EtAMzQwfOIurp9Dc0IgBHdZDVc2VQfEfFidR0AAHBPnq754z4I3agWAACApC4KRDYDAgAAHsFZgUgQAgAAHslJgUgQAgAAHtHBQCQIAQAAj2xwVzhBCAAAmIOtQCQIAQAAc1JECEIAAMA8FWVTLSPiW+5CAAAAUlsvmfOUCAAAmJudTRUEIwAAYC4Gd5mLEIwAAIDHtzcQ9c4JRl9v70f/HwAAwFQsjl3Q1e1zV7dFRCwT1AMAAJDM0UDUE4wAAIBHc3Ig6m0Eo9+3LwcAACCdswNRr6vbn/+C0ecN6wEAAEjm4kDU6+r2VTACAADu0V94EbjNrXlP+wAAAABJRU5ErkJggg==\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"edit\":\"app_edit__3yneH\",\"openEditorIcon\":\"app_openEditorIcon__17Cz6\",\"app\":\"app_app__2PzYU\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA0QAAAAmCAYAAAGTymt0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA0LTIxVDEwOjUyOjUwKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wNC0yMVQxMDo1NDoyMyswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wNC0yMVQxMDo1NDoyMyswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmYzdkYTNiMi01MGMwLWM0NDMtYjA3ZC1jYTliYjMyZGM4YmQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ZmM3ZGEzYjItNTBjMC1jNDQzLWIwN2QtY2E5YmIzMmRjOGJkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZmM3ZGEzYjItNTBjMC1jNDQzLWIwN2QtY2E5YmIzMmRjOGJkIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmYzdkYTNiMi01MGMwLWM0NDMtYjA3ZC1jYTliYjMyZGM4YmQiIHN0RXZ0OndoZW49IjIwMjItMDQtMjFUMTA6NTI6NTArMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7J8fHNAAACtUlEQVR4nO3dTXKiUBQG0EvjKpJJ9yRZCO6IdeCOWEicdE9iVkHRgw5GbVHR8KfnjGJJKKqsW9+7j/cgqes6mKYkSSIi4sfI18EJaZHVERFJ8wfTpZImrsrLJJFJ09Vkkh9pogwaJs6AYSZU0MTJoIlarJa1kRxcoSme5rNxAtygystEEcGNDOego8VqWUf8S6EIRQSdNZPa28+KCC53WEAR5rehk2NzCIoIOjosJLNzcKVmYkESwZUsyoLvsZFEcL1NlZfPprihg+ZGa3wWUISeCK6xLaAIRQRdrXcLKMKKBQB6dLh16BijOQB6lRZZfepuqiACYBBtgWTNDwCj2G4NF0QAjMnUHABj2XiAMAC92tk4tGtvD8RiwOsB4LFtDvcQRQgiAPq3rvLyte1LU3MA9GKxWr6dCqCGxQoA9OUlLbK3cwcJIgD69JIW2e9TBwgiAPr2My2y97YvBREAQ3hqCyNBBMBQjoaRR/wAMDQv9QJgVHudkSACYAzbMDI1B8CYPnREAIymyssnQQTAKJoX4wkiAAbXhFCEh54C0JOWdxHthVCEjgiAAR2GUIQgAmAgx0IoQhABMIC2EIoQRAD07FQIRQgiAHp0LoQirJoDAABm5nNl9rrKy9dbz2VmDgAAmKOXtMjqtMjebjmJO0QAAMCstDy7Z++1q5dyhwgAALgHT593jN7PH/pFQwQAANyTTo2RhggAALhHFzVGSVpkNhEBAAD37ugeIw0RAADwSPYaIw0RAADwiDZVXj5riAAAgEf1sRj7CgAAAAa2XTanIQIAAB7Ffw9W0BABAAD37ugT5iIikrq2hQgAAJiPxWp5aRPT2ghtz/UN1wMAADAlZxuhhoYIAAC4Fxc3Qg0NEQAAMHd/qrz8dc0/aogAAIC5Wld5+XrLCTREAADA3NzcCDX+AqIb/MroYUkbAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/settings.7c9f5af4.svg\";","module.exports = __webpack_public_path__ + \"static/media/download.1ab0e91c.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload.75179563.svg\";","module.exports = __webpack_public_path__ + \"static/media/audio.48d9b56f.svg\";","module.exports = __webpack_public_path__ + \"static/media/video.78c8cbe4.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete_icon.ceb3f725.svg\";","module.exports = __webpack_public_path__ + \"static/media/mixedContent.07787ab5.svg\";","module.exports = __webpack_public_path__ + \"static/media/modal_close.c5817d71.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.f1818abb.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow.8e299767.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"testWrapper\":\"MainPage_testWrapper__cgSin\",\"arrow\":\"MainPage_arrow__4rtcE\",\"UpperText\":\"MainPage_UpperText__2mCaW\",\"LowerText\":\"MainPage_LowerText__3ktZ5\",\"Price15\":\"MainPage_Price15__1x0uX\",\"PriceCombo\":\"MainPage_PriceCombo__H4jwn\",\"Price30\":\"MainPage_Price30__opmzz\"};","import React from \"react\";\r\n\r\nconst defaultAuthContext = {\r\n    isAdmin: false\r\n}\r\n\r\nexport const AuthContext = React.createContext(defaultAuthContext)","import React, { useEffect, useRef, useState } from \"react\";\r\nimport styles from './index.module.scss';\r\nimport moment from \"moment\";\r\nimport arrowL from './arrow_L.png'\r\nimport arrowR from './arrow_R.png'\r\n\r\ntype Files = {\r\n    id: number\r\n    name: string\r\n    src: string\r\n    type: string\r\n}\r\n\r\nexport const MainPage = ({ settings, auth }: any) => {\r\n    moment.locale('ru')\r\n    const [currentArrow, setCurrentArrow] = useState(() => {\r\n        const storedArrow = localStorage.getItem('currentArrow');\r\n        return storedArrow ? storedArrow : arrowL; \r\n    });\r\n\r\n    const handleArrowChange = () => {\r\n        const newArrow = currentArrow === arrowL ? arrowR : arrowL;\r\n        setCurrentArrow(newArrow);\r\n\r\n        // Сохраняем новое значение в localStorage\r\n        localStorage.setItem('currentArrow', newArrow); // <-- Исправлено здесь\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={styles.testWrapper} >\r\n           <div className={styles.arrow} onClick={handleArrowChange}> \r\n                <img src={currentArrow} alt=\"Стрелка\"></img> \r\n            </div>\r\n            <div className={styles.UpperText} >\r\n                <li>{settings.naimenovanie1}</li>\r\n                <li>{settings.naimenovanie2}</li>\r\n                <li>{settings.naimenovanie3}</li>\r\n                <li>{settings.naimenovanie4}</li>\r\n                <li>{settings.naimenovanie5}</li>\r\n                <li>{settings.naimenovanie6}</li>\r\n                <li>{settings.naimenovanie7}</li>\r\n            </div>\r\n            <div className={styles.LowerText} >\r\n                <li>{settings.naimen1}</li>\r\n                <li>{settings.naimen2}</li>\r\n                <li>{settings.naimen3}</li>\r\n                <li>{settings.naimen4}</li>\r\n                <li>{settings.naimen5}</li>\r\n                <li>{settings.naimen6}</li>\r\n                <li>{settings.naimen7}</li>\r\n            </div>\r\n            <div className={styles.Price15} >\r\n                <li>{settings.price15_1}</li>\r\n                <li>{settings.price15_2}</li>\r\n                <li>{settings.price15_3}</li>\r\n                <li>{settings.price15_4}</li>\r\n                <li>{settings.price15_5}</li>\r\n                <li>{settings.price15_6}</li>\r\n                <li>{settings.price15_7}</li>\r\n            </div>\r\n            <div className={styles.PriceCombo } >\r\n                <li>{settings.priceCombo_1}</li>\r\n                <li>{settings.priceCombo_2}</li>\r\n                <li>{settings.priceCombo_3}</li>\r\n                <li>{settings.priceCombo_4}</li>\r\n                <li>{settings.priceCombo_5}</li>\r\n                <li>{settings.priceCombo_6}</li>\r\n                <li>{settings.priceCombo_7}</li>\r\n            </div>\r\n            <div className={styles.Price30} >\r\n                <li>{settings.price30_1}</li>\r\n                <li>{settings.price30_2}</li>\r\n                <li>{settings.price30_3}</li>\r\n                <li>{settings.price30_4}</li>\r\n                <li>{settings.price30_5}</li>\r\n                <li>{settings.price30_6}</li>\r\n                <li>{settings.price30_7}</li>\r\n                </div>\r\n        </div>\r\n        )\r\n    }\r\n\r\n","import React, {FunctionComponent, useEffect, useMemo} from 'react';\r\nimport {Auth} from \"../../models/Auth\";\r\nimport {DatabaseProvider} from \"../../database/databaseProvider\";\r\nimport {Logger} from \"sp_widget_core\";\r\nimport { AuthContext } from '../AuthContext';\r\nimport {MainPage} from \"../MainPage/MainPage\";\r\n\r\ninterface IAppMainComponent {\r\n    clientProvider?: any\r\n    database?: DatabaseProvider\r\n    auth?: Auth\r\n    widgetOptions?: any\r\n    isAdmin: boolean\r\n    widgetOptionsTemp: any\r\n}\r\n\r\nconst logger = Logger()\r\n\r\nconst AppMain: FunctionComponent<IAppMainComponent> = ({widgetOptionsTemp, clientProvider, database, auth, widgetOptions, isAdmin}) => {\r\n    useEffect(() => {\r\n        const subscribeToEvents = () => {\r\n            if (clientProvider) {\r\n                clientProvider.setListeners([\r\n                    {listenerType: \"setDeviceId\", listenerMethod: setDeviceId}\r\n                ])\r\n            }\r\n        }\r\n        subscribeToEvents()\r\n\r\n        return () => {\r\n            if (clientProvider) {\r\n                clientProvider.clearListeners()\r\n            }\r\n        }\r\n    }, [clientProvider])\r\n\r\n    useEffect(() => {\r\n        if('getDeviceId' in window){\r\n            window.getDeviceId()\r\n        }\r\n    }, [])\r\n\r\n    const authContext = useMemo(() => {\r\n        return {\r\n            isAdmin\r\n        }\r\n    }, [isAdmin])\r\n\r\n    if (!clientProvider) {\r\n        return null\r\n    }\r\n\r\n    const setDeviceId = (deviceId: string) => {\r\n        logger.log(`set device id: ${deviceId}`)\r\n        window.deviceId = deviceId\r\n    }\r\n\r\n    const isEmpty = (obj: {}) => {\r\n        return Object.keys(obj).length === 0;\r\n    }\r\n\r\n    return (\r\n        <div style={{height: '100%'}} id={'appMain'}>\r\n            <AuthContext.Provider value={authContext}>\r\n                <MainPage\r\n                    auth={auth}\r\n                    settings={!isEmpty(widgetOptionsTemp) ? widgetOptionsTemp : widgetOptions.settings}\r\n                />\r\n            </AuthContext.Provider>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport {AppMain}\r\n","export const DATABASE_CONFIG = {\r\n    NAME: 'my_database_name'\r\n}\r\n","export const TABLES = {\r\n    TABLE_NAME: 'table_name'\r\n}","import Dexie from 'dexie/dist/dexie.js'\r\nimport {TABLES} from './tables'\r\nimport {DatabaseProvider} from \"./databaseProvider\";\r\n\r\nclass DexieProvider implements DatabaseProvider {\r\n    database: Dexie\r\n\r\n    constructor(databaseName: string) {\r\n        this.database = new Dexie(databaseName)\r\n    }\r\n\r\n    declare = (version: string | number) => {\r\n        const numberVersion = Number(version)\r\n        this.database.version(numberVersion).stores({\r\n            [TABLES.TABLE_NAME]: 'id, data'\r\n        });\r\n    }\r\n\r\n    open = (databaseName?: string) => {\r\n        return this.database.open()\r\n    }\r\n}\r\n\r\nexport {DexieProvider}","import {DexieProvider} from \"./dexieProvider\";\r\nimport {DatabaseProvider} from \"./databaseProvider\";\r\n\r\nclass Database {\r\n    private _database: DatabaseProvider\r\n\r\n    constructor(databaseName: string) {\r\n        this._database = new DexieProvider(databaseName)\r\n    }\r\n\r\n    declare = (version: string | number) => {\r\n        this._database.declare(version)\r\n    }\r\n\r\n    open = (databaseName?: string): Promise<any> => {\r\n        return this._database.open(databaseName)\r\n    }\r\n\r\n    someGetMethod = () => {\r\n        return []\r\n    }\r\n}\r\n\r\nexport {Database}","export default [\r\n    {name: 'getAuthorization', method: 'getAuthorization'},\r\n    {name: 'setTimeoutUser', method: 'setTimeoutUser', callback: (timeout: number): void => {\r\n            window.setTimeoutUser(timeout)\r\n        }},\r\n    {name: 'timeoutCallback', listener: true},\r\n    {name: 'getDeviceId'},\r\n    {name: 'setDeviceId', listener: true},\r\n    {name: 'getDeviceHost'}\r\n]","export class Auth {\r\n    private _token: string\r\n    private _host: string\r\n    private _deviceId: string\r\n\r\n    constructor(token: string, host: string, deviceId: string) {\r\n        this._token = token;\r\n        this._host = host;\r\n        this._deviceId = deviceId;\r\n    }\r\n}","import React from 'react'\r\nimport { AppMain } from \"../components/appMain/appMain\";\r\nimport { Logger, ClientCommunicator, Messenger, translate, setLocale, setDictionary, isExist } from \"sp_widget_core\";\r\nimport { DATABASE_CONFIG } from \"../database/databaseConfig\";\r\nimport { Database } from \"../database\";\r\nimport methods from '../communicatorMethods'\r\nimport styles from './app.module.scss'\r\nimport { Auth } from '../models/Auth';\r\nimport { Localisation } from \"../models/localisation\";\r\nimport { MediaFileData } from '../models/MediaFileData';\r\nimport { WidgetEditor, WidgetOptionsEditor, getQueryStringValue } from 'sp_widget_editor'\r\nimport settingsIcon from './images/settings.svg'\r\nimport download_icon from './images/download.svg'\r\nimport upload_icon from './images/upload.svg'\r\nimport audio_icon from './images/audio.svg'\r\nimport video_icon from './images/video.svg'\r\nimport delete_icon from './images/delete_icon.svg'\r\nimport mixed_content_icon from './images/mixedContent.svg'\r\nimport modal_close from './images/modal_close.svg'\r\nimport plus_icon from './images/plus.svg'\r\nimport arrow_icon from './images/arrow.svg'\r\n\r\nimport l10n from '../dictionary/l10n.json'\r\nsetDictionary(l10n)\r\n\r\ninterface IAppProps {\r\n    requireDatabase?: boolean\r\n    requireCommunicator?: boolean\r\n}\r\n\r\ninterface IAppState {\r\n    database?: Database,\r\n    clientCommunicator?: any\r\n    isAdmin: boolean\r\n    auth?: Auth\r\n    widgetOptionsEditor: WidgetOptionsEditor\r\n    isAuthenticationScreenOpen: boolean\r\n    widgetOptionsTemp: any\r\n}\r\n\r\nconst logger = Logger()\r\n\r\nclass App extends React.Component<IAppProps, IAppState> {\r\n    settingsIconRef: any\r\n    private _frontendMessenger: any\r\n    private _isNeedDownloadMedia = true\r\n\r\n    constructor(props: IAppProps) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            database: undefined,\r\n            clientCommunicator: undefined,\r\n            auth: undefined,\r\n            isAdmin: false,\r\n            widgetOptionsEditor: new WidgetOptionsEditor(window['petrovich']),\r\n            isAuthenticationScreenOpen: false,\r\n            widgetOptionsTemp: {}\r\n        }\r\n\r\n        this._frontendMessenger = Messenger(this.messageListener)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._initLocale()\r\n        this.setCommunicator()\r\n        this.setDatabase()\r\n    }\r\n\r\n    componentWillUnmount(): void {\r\n        this._frontendMessenger.removeListener()\r\n    }\r\n\r\n    setWidgetOptionsTemp = (options: any) => {\r\n        this.setState({ widgetOptionsTemp: options })\r\n    }\r\n\r\n    clearWidgetOptionsTemp = () => {\r\n        this.setState({ widgetOptionsTemp: {} })\r\n    }\r\n\r\n    _setAuth = (data: any) => {\r\n        logger.log(`Setting authorization ${JSON.stringify(data)}`)\r\n\r\n        const { token, host, deviceId } = data\r\n        this.setState(state => ({\r\n            ...state,\r\n            auth: new Auth(token, host, deviceId)\r\n        }))\r\n    }\r\n\r\n    private _initLocale = () => {\r\n        this.onLocaleChanged(this.state.widgetOptionsEditor.data.settings.localisation)\r\n    }\r\n\r\n    messageListener = (message: any) => {\r\n        logger.log(`App#frontendMessageListener. ${message.data}`)\r\n\r\n        let data: any = message.data\r\n        if (typeof data !== 'string') {\r\n            return\r\n        }\r\n\r\n        if (data.indexOf('selectMedia__') === 0) {\r\n            data = data.replace('selectMedia__', '')\r\n            const bufferData: MediaFileData = JSON.parse(data)\r\n            this.state.widgetOptionsEditor.onMediaLoaded(bufferData)\r\n        }\r\n\r\n        if (data.indexOf('selectMediaWithFolders__') === 0) {\r\n            data = data.replace('selectMediaWithFolders__', '')\r\n            const bufferData: any = JSON.parse(data)\r\n            this.state.widgetOptionsEditor.onMediaLoaded(bufferData)\r\n        }\r\n\r\n        if (data.includes('authorization')) {\r\n            data = data.replace('authorization__', '')\r\n            const parsed = JSON.parse(data)\r\n            this.onMessageForApp('authorization', parsed)\r\n        }\r\n\r\n        if (data.includes('listenerDataUpdated')) {\r\n            data = data.replace('listenerDataUpdated__', '')\r\n            this.onMessageForApp('listenerDataUpdated', data)\r\n        }\r\n\r\n        if (data.includes('listenerDataDeleted')) {\r\n            data = data.replace('listenerDataDeleted__', '')\r\n            this.onMessageForApp('listenerDataDeleted', data)\r\n        }\r\n\r\n        if (data.includes('settings__')) {\r\n            data = data.replace('settings__', '')\r\n            data = JSON.parse(data)\r\n            this._updateWidgetData(data)\r\n        }\r\n    }\r\n\r\n    private _updateWidgetData = (data: any) => {\r\n        const widgetOptionsEditor = this.state.widgetOptionsEditor\r\n\r\n        this.setState(state => ({\r\n            ...state,\r\n            widgetOptionsEditor: new WidgetOptionsEditor(\r\n                {\r\n                    ...widgetOptionsEditor.data,\r\n                    ...data\r\n                },\r\n                widgetOptionsEditor.inEditMode\r\n            )\r\n        }))\r\n    }\r\n\r\n    onWidgetOptionsUpdated = (updatedData: any) => {\r\n        if (isExist(updatedData)) {\r\n            this._updateWidgetData(updatedData)\r\n        } else {\r\n            // TODO: remove it after reworking widgetEditor.add method\r\n            this.forceUpdate()\r\n        }\r\n    }\r\n\r\n    onLocaleChanged = (locale: Localisation) => {\r\n        setLocale(locale)\r\n        this.forceUpdate()\r\n    }\r\n\r\n    onMessageForApp = (type: string, data: any) => {\r\n        logger.log(`App#onMessageForApp. type:${type}. data: ${JSON.stringify(data)}`)\r\n        if (type === 'authorization') {\r\n            this._setAuth(data)\r\n        }\r\n\r\n        if (type === 'closeModal') {\r\n\r\n        }\r\n    }\r\n\r\n    setDatabase = () => {\r\n        if (this.props.requireDatabase) {\r\n            const database = new Database(DATABASE_CONFIG.NAME)\r\n\r\n            database.declare(1)\r\n            database.open()\r\n                .then(() => {\r\n                    logger.log(`Database was opened`)\r\n                    this.setState(state => ({\r\n                        ...state,\r\n                        database\r\n                    })\r\n                    )\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    setCommunicator = () => {\r\n        if (this.props.requireCommunicator) {\r\n            const clientCommunicator = ClientCommunicator(methods)\r\n\r\n            if (clientCommunicator.provider) {\r\n                clientCommunicator.connect()\r\n                    .then(() => {\r\n                        logger.log(`Client communicator was opened`)\r\n                        this.setState({\r\n                            clientCommunicator\r\n                        })\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    isServicesReady = () => {\r\n        const { requireCommunicator, requireDatabase } = this.props\r\n\r\n        if (requireCommunicator && !this._isCommunicatorInitialized()) {\r\n            logger.warn(`Client communicator required`)\r\n            return false\r\n        }\r\n\r\n        if (requireDatabase && !this._isDatabaseInitialized()) {\r\n            logger.warn(`Database required`)\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    _isDatabaseInitialized = () => {\r\n        return !!this.state.database\r\n    }\r\n\r\n    _isCommunicatorInitialized = () => {\r\n        const { clientCommunicator } = this.state\r\n        return !!(clientCommunicator && clientCommunicator.provider)\r\n    }\r\n\r\n    handleAuthenticationScreenOpen = () => {\r\n        this.setState((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                isAuthenticationScreenOpen: true\r\n            }\r\n        })\r\n    }\r\n\r\n    handleAuthenticationScreenClose = () => {\r\n        this.setState((prevState) => {\r\n            return {\r\n                ...prevState,\r\n                isAuthenticationScreenOpen: false\r\n            }\r\n        })\r\n    }\r\n\r\n    onAuth = () => {\r\n        this.setState((prevState) => ({ isAdmin: true }))\r\n    }\r\n\r\n    isEmpty(obj: {}) {\r\n        return Object.keys(obj).length === 0;\r\n    }\r\n\r\n    getAppStyle = (styleName: string) => {\r\n        const settings = this.state.widgetOptionsEditor.data.settings\r\n        const tempSettings = this.state.widgetOptionsTemp\r\n        const styleValue = !this.isEmpty(tempSettings) ? tempSettings[styleName] : settings[styleName]\r\n\r\n        return styleValue || null\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            isAdmin,\r\n            auth,\r\n            database,\r\n            clientCommunicator,\r\n            widgetOptionsEditor,\r\n            isAuthenticationScreenOpen\r\n        } = this.state\r\n        const isServicesReady = this.isServicesReady()\r\n        const isShowAuthenticationScreen = !isAdmin && process.env.REACT_APP_PIN_CODE && getQueryStringValue()\r\n        const appMainProps = {\r\n            clientProvider: clientCommunicator?.provider,\r\n            widgetOptions: widgetOptionsEditor.data,\r\n            widgetOptionsTemp: this.state.widgetOptionsTemp,\r\n            database,\r\n            auth,\r\n            isAdmin\r\n        }\r\n\r\n        if (!isServicesReady) {\r\n            return null\r\n        }\r\n\r\n        return (\r\n            <div className={styles.app} style={\r\n                {\r\n                    fontSize: `${this.getAppStyle('widgetFontSize')}px`\r\n                }\r\n            }>\r\n                <AppContext.Provider value={{\r\n                    onLocaleChanged: this.onLocaleChanged,\r\n                }}>\r\n                    <AppMain\r\n                        {...appMainProps}\r\n                    />\r\n                    {getQueryStringValue() &&\r\n                        <div\r\n                            className={styles.edit}\r\n                        >\r\n                            <WidgetEditor\r\n                                path=\"settings\"\r\n                                isNeedDownloadMedia={this._isNeedDownloadMedia}\r\n                                widgetOptionsEditor={widgetOptionsEditor}\r\n                                onMessageForApp={this.onMessageForApp}\r\n                                onWidgetOptionsUpdated={this.onWidgetOptionsUpdated}\r\n                                ref={settingsIconRef => this.settingsIconRef = settingsIconRef}\r\n                                //@ts-ignore\r\n                                MainComponent={AppMain}\r\n                                appMainProps={appMainProps}\r\n                                setWidgetOptionsTemp={this.setWidgetOptionsTemp}\r\n                                clearWidgetOptionsTemp={this.clearWidgetOptionsTemp}\r\n                                localeChanged={this.onLocaleChanged}\r\n                                navButtonsText={{ applyButton: translate('saveSettings'), resetButton: translate('reset') }}\r\n                                iconsList={{\r\n                                    download_icon,\r\n                                    upload_icon,\r\n                                    audio_icon,\r\n                                    video_icon,\r\n                                    delete_icon,\r\n                                    mixed_content_icon,\r\n                                    modal_close,\r\n                                    plus_icon,\r\n                                    arrow_icon\r\n                                }}\r\n\r\n                                settings={[\r\n                                    {\r\n                                        name: translate('settings'),\r\n                                        fields: [\r\n                                            {\r\n                                                label: translate('selectLanguage'),\r\n                                                name: 'localisation',\r\n                                                type: 'localisation'\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie1',\r\n                                                label: 'naimenovanie1',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie2',\r\n                                                label: 'naimenovanie2',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie3',\r\n                                                label: 'naimenovanie3',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie4',\r\n                                                label: 'naimenovanie4',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie5',\r\n                                                label: 'naimenovanie5',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie6',\r\n                                                label: 'naimenovanie6',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie7',\r\n                                                label: 'naimenovanie7',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen1',\r\n                                                label: 'naimen1',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen2',\r\n                                                label: 'naimen2',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen3',\r\n                                                label: 'naimen3',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen4',\r\n                                                label: 'naimen4',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen5',\r\n                                                label: 'naimen5',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimen6',\r\n                                                label: 'naimen6',\r\n                                            },\r\n                                            {\r\n                                                name: 'naimenovanie7',\r\n                                                label: 'naimenovanie7',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_1',\r\n                                                label: 'price15-1',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_2',\r\n                                                label: 'price15-2',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_3',\r\n                                                label: 'price15-3',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_4',\r\n                                                label: 'price15-4',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_5',\r\n                                                label: 'price15-5',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_6',\r\n                                                label: 'price15-6',\r\n                                            },\r\n                                            {\r\n                                                name: 'price15_7',\r\n                                                label: 'price15-7',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_1',\r\n                                                label: 'priceCombo-1',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_2',\r\n                                                label: 'priceCombo-2',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_3',\r\n                                                label: 'priceCombo-3',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_4',\r\n                                                label: 'priceCombo-4',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_5',\r\n                                                label: 'priceCombo-5',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_6',\r\n                                                label: 'priceCombo-6',\r\n                                            },\r\n                                            {\r\n                                                name: 'priceCombo_7',\r\n                                                label: 'priceCombo-7',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_1',\r\n                                                label: 'price30-1',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_2',\r\n                                                label: 'price30-2',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_3',\r\n                                                label: 'price30-3',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_4',\r\n                                                label: 'price30-4',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_5',\r\n                                                label: 'price30-5',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_6',\r\n                                                label: 'price30-6',\r\n                                            },\r\n                                            {\r\n                                                name: 'price30_7',\r\n                                                label: 'price30-7',\r\n                                            },\r\n\r\n                                        ]\r\n                                    },\r\n                                ]}\r\n                            >\r\n                                <img\r\n                                    src={settingsIcon}\r\n                                    className={styles.openEditorIcon}\r\n                                    onClick={(e) => {\r\n                                        this.settingsIconRef.editStart(e);\r\n                                    }}\r\n                                    width={120}\r\n                                    height={120}\r\n                                    alt=\"\"\r\n                                />\r\n                            </WidgetEditor>\r\n                        </div>\r\n                    }\r\n                </AppContext.Provider>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\ntype AppContextType = {\r\n    onLocaleChanged: (locale: Localisation) => void\r\n}\r\n\r\nexport const AppContext = React.createContext<AppContextType>({\r\n    onLocaleChanged: () => {\r\n\r\n    }\r\n})\r\n\r\nexport { App }\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import 'whatwg-fetch'\r\nimport 'core-js'\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {App} from './app/app';\r\n\r\nimport './index.css';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n\r\nReactDOM.render(\r\n    <App\r\n        requireCommunicator\r\n    />,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}